---
title: linux 基础指令
date: 2020-04-30 11:40:20
toc: true
categories: 工具集
tags:
  linux
---

# Linux基础指令
###  1. `grep`: 查找文件中的关键字

```
$ grep "string" [选项] file
```
使用 grep命令查找文件中的所有 `user`关键字
<img src="http://lx724-bucket.oss-ap-southeast-1.aliyuncs.com/blog/linux/20200430114844.jpg" width="50%" height="50%">

* `-i`选项可以在文件中不区分大小写地搜索字符串
* `-c(count)`可以找到给定字符串/模式匹配的行数


### 2. `cat`: 查看文件的内容
```
cat router.js
```
<img src="http://lx724-bucket.oss-ap-southeast-1.aliyuncs.com/blog/linux/20200430135423.jpg" width="50%" height="50%">

cat主要有三大功能
1.  一次显示整个文件
```
$ cat filename
```

2.  创建一个文件 并将前面命令的输出内容填充进去
```
$ cat > filename
```
只能创建一个文件 不能编辑已有文件

3.  将几个文件合并成一个文件
```
$ cat file1 file2 > filename
```

### 3. `echo`: 字符串的输出
```
$ echo "some text"
```
这是一个内置命令，主要用于Shell脚本和批处理文件中，以将状态文本输出到屏幕或文件。

### 4. `touch` 创建文件
```
$ touch somefile
```
`touch`命令用于创建没有任何内容的文件。

### 5. `rm`： 删除文件/目录
```
$ rm [选项] someFile
```
rm 命令用于删除一个文件或者目录

选项：
* `-i`: 删除前逐一询问确认
* `-f`: 即使原档案属性设为唯读，亦直接删除 无需逐一确认
* `-r`: 将目录及以下之档案亦逐一删除。


### 6. `tail`查看文档的内容
```
$ tail [选项] someFile
```
默认显示文档的最后10行

几个常用的参数：
* `-f`, 循环读取
```
$ tail -f notes.log
```
此命令显示 `notes.log` 文件的最后10行。当将某些行添加至`notes.log`文件时， `tail`命令会继续显示这些行。显示一直继续 直到按下（`Ctrl-C`）组合键停止显示。

* `+`从xx行到结尾
```
$ tail +20 notes.log
```

* `-c` 最后xx行
```
$ tail -c 10 notes.log
```

### 7. `find`搜索文件
```
$ find path -name filename
```
`find`命令可以快速查找文件或目录。当你正在处理具有数百个文件和多个目录的大型项目时，此功能很有用。

查找指定类型的文件：
```
$ find . -name "*.js"
```

### 8. `mv`移动文件
```
$ mv somefile /to/some/other/path
```
该mv命令将文件或目录从一个位置移动到另一个位置。

查找指定类型的文件：
支持移动单个文件，多个文件和目录。

### 9. `wget`下载文件的工具
```
$ wget someurl
```
`wget`是一个免费软件包 用于使用 `HTTP, HTTPS, FTP和FTPS`检索文件   
这是一个非交互式的命令行工具，因此可以很容易地从脚本，CRON作业，不支持`X-Windows`的终端等中调用它。

### 10. `|`管道命令
通常情况下 我们在终端只能执行一条命令，然后按下回车执行， 那么如何执行多条命令？  
* 顺序执行多条命令 `command; comand1; command2` 简单的顺序指令可以通过 `;`来实现
* 有条件的执行多条命令：`which command1 && command2 || command3`
    * && : 如果前一条命令执行成功则执行下一条命令，和JavaScript中用法一致
    * || :与&&命令相反，执行不成功时执行下一个。
* `$?`: 存储上一次命令的返回结果

```
// 栗子：
$ which git>/dev/null && git --help  // 如果存在git命令，执行git --help命令
$ echo $? 
```

而管道命令则可以衔接各种命令的输出输入，使得连锁操作变得简单。

```
管道是一种通信机制，通常用于进程间的通信（也可通过socket进行网络通信），它表现出来的形式将前面每一个进程的输出（stdout）直接作为下一个进程的输入（stdin）
```

```
$ 指令1 | 指令2 | …
```
管道命令的注意事项：
* 只能处理前一条指令的正确输出，不能处理错误输出；
* 后一条指令，必须能够接收标准输入流命令才能执行。

例子： 1、分页显示 /etc 目录 中内容的详细信息
```
$ ls -l /etc | more
```

2、将一个字符串输入到一个文件中
```
$ echo "Hello World" | cat > hello.txt
```


### 11. ls
在linux中 通常使用 `ls -l`列出， 其中可以查看`文件属性`,所属用户组等较为详细的信息。下面详细解释从左到右每一列是什么意思

<img src="http://lx724-bucket.oss-ap-southeast-1.aliyuncs.com/blog/linux/20200604101924.jpg" width="50%" height="50%">

- `第一列第一个字段：` 文件类型， 后面`9个字符是模式`， 其中分为`三组`， 每一组三个字段。 第一组为所属`用户权限`。 第二组为所属`组的权限`, 第三组为`其他用户所属权限`。 其中r(read)代表可读，w(write)代表可写，e(execute)代表可执行。在后面的9个字符中，如果是字母说明有相应的权限，如果为`"-"代表没有权限`。举一个例子

-rw-r-r--:此为普通文件，对于所属用户为可读可写不能执行，对于所属组仅仅可读，对于其他用户仅为读。

- 第二列 硬连接树木
```
硬链接允许作用之一是允许一个文件拥有多个有效路径名，从而防止误删。但是只能在同一文件系统中的文件之间进行连接，不能对目录进行创建。
```

第三列是所属用户，第四列为所属组，第五列为文件大小，第六列为文件被修改的时间，最后为文件名。其中使用chown改变所属用户，chgrp改变所属组。


### 12.  查看进程
有的时候 我们需要查看进程是否已经启动或者尝试终止进程。  
经常使用的命令为 `ps -ef` --- 列出当前正在运行的程序  
那如何定位我们想要查看的进程A， 这个时候使用 `grep`， 即
```bash
ps -ef | grep A
```


### 13. tar解压缩
解压缩命令  
常用参数
```
-c: 创建tar文件
-x: 解开tar文件
-t: 列出tar文件中包含的文件信息
-r: 附加新的文件到 tar文件中
```
常用命令组合
- tar -xvf /home/a.tar  // 打开tar打包文件
- tar -zxvf /home/a.tar.gz // 解压以gzip压缩的文件
- tar -jxvf /home/a.tar.bz2 //解压以bzip压缩的文件
- tar -cvf /home/a.tar /home 打包/home下所有文件

### 14.  lsof
列出当前系统打开的文件描述符工具。可以得知感兴趣的描述符是被哪些进程使用

|  参数   | 	描述  |
|  ----  | ----  |
| -i  | 显示socket文件描述符 |
| -c  | 显示指定的命令打开的所有文件描述符 |
| -t  | 仅显示打开了目标文件描述符的进程pid  |

例子
|  执行任务   | 	命令  |
|  ----  | ----  |
| 列出所有的网络链接  | lsof -i |
| 列出所有udp的网络链接  | lsof -i udp |
| 列出谁在使用某个端口  | lsof -i :3306  |
| 列出谁在使用特定的tcp端口  | lsof -i tcp:80  |
| 根据文件描述范围列出文件信息  | lsof -d 2-3 |


### 15.  nc
nc-->“瑞士军刀”。不知大家在渗透过程中，拿了shell有没有使用nc搞点事儿。它用来快速构建网络链接。常用来调试客户端程序。

|  参数   | 	描述  |
|  ----  | ----  |
| -i  | 设置数据包传送的时间间隔 |
| -l  | 以服务器方式运行。默认为客户端运行 |
| -k  | 重复接受并处理某个端口上的所有链接  |
| -p  | 以客户端运行时强制其使用指定端口  |
| -C  | 将CR和LF两个字符作为结束符  |
| -u  | 使用udp协议。默认tcp协议  |
| -X  | nc客户端余代理服务器通信时默认为socks5协议  |
| -z  | 扫描目标机器某个范围服务是否开启  |


案例
|  执行任务   | 	执行命令  |
|  ----  | ----  |
| 扫描机器A端口号在30-40的服务 | nc -z A 30-40 |
| 连接服务器A 端口号为5000 | nc -C A 5000 |
| 传送文件  | MachineA:nc -v -n ip portE:\a.exe  |

